{"version":3,"sources":["helper/apiCalls.js","useAuth.js","TrackSearchResult.js","Components/Appbar.js","helper/spotifyAPICalls.js","Components/CardComponent.js","Components/Home.js","Components/MusicPlayer.js","Components/Player.js","Components/Loading.js","Dashboard.js","Login.js","App.js","Routes.js","index.js"],"names":["backend","process","MAX_SPEED","parseInt","playSong","speed","names","track","a","bucket","length","forEach","name","includes","title","test","handleDownload","axios","get","params","uri","externalUrl","artist","then","res","console","log","data","dest","handleUpload","internetSpeed","useAuth","code","useState","accessToken","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","useEffect","post","window","history","pushState","catch","err","location","interval","setInterval","refresh","TrackSearchResult","chooseTrack","input","id","style","cursor","display","margin","alignItems","onClick","src","albumUrl","height","width","marginLeft","Typography","variant","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","breakpoints","up","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","searchIcon","padding","pointerEvents","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","Appbar","setSearch","result","setResult","setPlayingTrack","classes","sw","document","getElementById","className","AppBar","Toolbar","noWrap","InputBase","placeholder","inputProps","onChange","e","target","value","map","spotifyApi","SpotifyWebApi","clientId","getSongs","setSearchResult","card","cancel","searchTracks","body","tracks","items","smallAlbumImage","album","images","reduce","smallest","image","artists","url","external_urls","spotify","background","details","flexDirection","content","flex","cover","controls","paddingBottom","playIcon","CardComponent","index","useTheme","Key","_text","substr","getSongInfo","Card","CardMedia","CardContent","component","whiteSpace","Box","textOverflow","overflow","IconButton","aria-label","arg","Home","setUrlName","MusicPlayer","trackUrl","setTrackUrl","alt","autoPlay","type","firstTime","Player","setUrl","setNames","handlePlay","JSON","parse","ListBucketResult","Contents","arr","bottom","textAlign","Button","btn","innerHTML","backdrop","zIndex","drawer","Loading","open","setOpen","Backdrop","CircularProgress","Dashboard","list","setList","searchResult","playingTrack","song","old","marginTop","marginBottom","AUTH_URL","login","href","textDecoration","size","createMuiTheme","primary","light","main","dark","contrastText","secondary","URLSearchParams","App","setSpeed","ThemeProvider","InitiateSpeedDetection","setTimeout","MeasureConnectionSpeed","startTime","endTime","download","Image","onload","Date","getTime","speedMBps","downloadSize","toFixed","showResults","onerror","msg","error","cacheBuster","addEventListener","attachEvent","getInternetSpeed","Login","Routes","path","exact","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b86c943d.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst backend = process.env.REACT_APP_BACKEND;\r\nconst MAX_SPEED = parseInt(process.env.REACT_APP_MAXSPEED);\r\n\r\nexport const playSong = async (speed, names, track) => {\r\n  let bucket = \"testmusicdata\";\r\n  if (speed > MAX_SPEED) {\r\n    bucket = \"testmusicdata\";\r\n  } else {\r\n    bucket = \"testmusicdata-lowrate\";\r\n  }\r\n  let test;\r\n  if (names.length !== 0) {\r\n    names.forEach((name) => {\r\n      if (name.includes(track.title)) {\r\n        if (name) {\r\n          // test = name.replaceAll(\" \", \"%20\");\r\n          test = name;\r\n        }\r\n      }\r\n    });\r\n  }\r\n  if (test)\r\n    return `https://${bucket}.s3.us-south.cloud-object-storage.appdomain.cloud/${test}`;\r\n};\r\n\r\nexport const handleDownload = async (track, speed) => {\r\n  let data = await axios\r\n    .get(`${backend}/download`, {\r\n      params: {\r\n        uri: track.externalUrl,\r\n        title: track.title,\r\n        artist: track.artist[0].name,\r\n      },\r\n    })\r\n    .then((res) => {\r\n      console.log(\"DONE\");\r\n      return {\r\n        name: res.data.name,\r\n        dest: res.data.dest,\r\n      };\r\n    });\r\n  return {\r\n    name: data.name,\r\n    dest: data.dest,\r\n  };\r\n};\r\n\r\nexport const handleUpload = async (name, dest, speed) => {\r\n  let data = await axios\r\n    .get(`${backend}/upload`, {\r\n      params: {\r\n        name: name,\r\n        dest: dest,\r\n        internetSpeed: speed,\r\n      },\r\n    })\r\n    .then((res) => {\r\n      return res.data;\r\n    });\r\n  return {\r\n    data,\r\n  };\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { storeCode } from \"./helper/apiCalls\";\r\n\r\nconst backend = process.env.REACT_APP_BACKEND;\r\nconsole.log(\"BACKEND: \", backend);\r\n\r\nexport default function useAuth(code) {\r\n  const [accessToken, setAccessToken] = useState();\r\n  const [refreshToken, setRefreshToken] = useState();\r\n  const [expiresIn, setExpiresIn] = useState();\r\n\r\n  const login = () => {\r\n    axios\r\n      .post(`${backend}/login`, { code })\r\n      .then((res) => {\r\n        setAccessToken(res.data.accessToken);\r\n        setRefreshToken(res.data.refreshToken);\r\n        setExpiresIn(res.data.expiresIn);\r\n\r\n        window.history.pushState({}, null, \"/\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        window.location = \"/\";\r\n      });\r\n  };\r\n\r\n  const refresh = () => {\r\n    if (!refreshToken || !expiresIn) return;\r\n    const interval = setInterval(() => {\r\n      axios\r\n        .post(`${backend}/refresh`, { refreshToken })\r\n        .then((res) => {\r\n          setAccessToken(res.data.accessToken);\r\n          setExpiresIn(res.data.expiresIn);\r\n        })\r\n        .catch(() => {\r\n          window.location = \"/\";\r\n        });\r\n    }, (expiresIn - 60) * 1000);\r\n    return () => clearInterval(interval);\r\n  };\r\n\r\n  useEffect(() => {\r\n    login();\r\n  }, [code]);\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, [refreshToken, expiresIn]);\r\n\r\n  return accessToken;\r\n}\r\n","import { Typography } from \"@material-ui/core\";\r\nimport \"./Components/home.css\";\r\n\r\nconst TrackSearchResult = ({ track, chooseTrack, input }) => {\r\n  function handlePlay() {\r\n    chooseTrack(track);\r\n    input.style.display = \"none\";\r\n  }\r\n  return (\r\n    <div\r\n      id=\"track\"\r\n      style={{\r\n        cursor: \"pointer\",\r\n        display: \"flex\",\r\n        margin: \"1rem\",\r\n        alignItems: \"center\",\r\n      }}\r\n      onClick={handlePlay}\r\n    >\r\n      <img src={track.albumUrl} style={{ height: \"64px\", width: \"64px\" }} />\r\n      <div style={{ marginLeft: \"1.2rem\" }}>\r\n        <Typography variant=\"subtitle1\">\r\n          {\" \"}\r\n          <strong>{track.title}</strong>{\" \"}\r\n        </Typography>\r\n        <Typography variant=\"body2\">{track.artist[0].name}</Typography>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrackSearchResult;\r\n","import React from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TrackSearchResult from \"../TrackSearchResult\";\r\nimport \"./home.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    display: \"none\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"block\",\r\n    },\r\n  },\r\n  search: {\r\n    position: \"relative\",\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    \"&:hover\": {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginLeft: 0,\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      marginLeft: theme.spacing(1),\r\n      width: \"auto\",\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    pointerEvents: \"none\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  inputRoot: {\r\n    color: \"inherit\",\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    // vertical padding + font size from searchIcon\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create(\"width\"),\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: \"12ch\",\r\n      \"&:focus\": {\r\n        width: \"20ch\",\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nconst Appbar = ({\r\n  search,\r\n  setSearch,\r\n  result,\r\n  setResult,\r\n  setPlayingTrack,\r\n  chooseTrack,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  let sw = document.getElementById(\"searchWindow\");\r\n  const handleSearch = (e) => {\r\n    setSearch(e.target.value);\r\n    if (e.target.value == \"\" || !search) {\r\n      sw.style.display = \"none\";\r\n    } else {\r\n      sw.style.display = \"block\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"fixed\">\r\n        <Toolbar>\r\n          <Typography className={classes.title} variant=\"h5\" noWrap>\r\n            MUSI-CLOUD\r\n          </Typography>\r\n          <div className={classes.search}>\r\n            <div className={classes.searchIcon}>\r\n              <SearchIcon />\r\n            </div>\r\n            <InputBase\r\n              placeholder=\"Search…\"\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n              inputProps={{ \"aria-label\": \"search\" }}\r\n              onChange={handleSearch}\r\n              value={search}\r\n            />\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <div id=\"searchWindow\">\r\n        {result\r\n          ? result.map((track) => {\r\n              return (\r\n                <TrackSearchResult\r\n                  track={track}\r\n                  key={track.uri}\r\n                  chooseTrack={chooseTrack}\r\n                  input={sw}\r\n                />\r\n              );\r\n            })\r\n          : \"Nothing here\"}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Appbar;\r\n","import SpotifyWebApi from \"spotify-web-api-node\";\r\n\r\nconst spotifyApi = new SpotifyWebApi({\r\n  clientId: process.env.REACT_APP_CLIENT_ID,\r\n});\r\n\r\nconst getSongs = (accessToken, search, setSearchResult, card = false) => {\r\n  spotifyApi.setAccessToken(accessToken);\r\n\r\n  if (!search) return setSearchResult([]);\r\n  if (!accessToken) return;\r\n  let cancel = false;\r\n  spotifyApi.searchTracks(search).then((res) => {\r\n    if (cancel) return;\r\n    setSearchResult(\r\n      res.body.tracks.items.map((track) => {\r\n        // console.log(track);\r\n        const smallAlbumImage = track.album.images.reduce((smallest, image) => {\r\n          if (card) {\r\n            if (image.height > smallest.height) return image;\r\n          } else {\r\n            if (image.height < smallest.height) return image;\r\n          }\r\n          return smallest;\r\n        }, track.album.images[0]);\r\n\r\n        return {\r\n          artist: track.artists,\r\n          title: track.name,\r\n          uri: track.uri,\r\n          albumUrl: smallAlbumImage.url,\r\n          externalUrl: track.external_urls.spotify,\r\n        };\r\n      })\r\n    );\r\n  });\r\n};\r\n\r\nexport default getSongs;\r\n","import { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nimport SpotifyWebApi from \"spotify-web-api-node\";\r\n\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SkipPreviousIcon from \"@material-ui/icons/SkipPrevious\";\r\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\r\nimport SkipNextIcon from \"@material-ui/icons/SkipNext\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { useEffect, useState } from \"react\";\r\nimport getSongs from \"../helper/spotifyAPICalls\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    background: \"#cae6e8\",\r\n  },\r\n  details: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  content: {\r\n    flex: \"1 0 auto\",\r\n  },\r\n  cover: {\r\n    width: \"10rem\",\r\n    height: \"inherit\",\r\n  },\r\n  controls: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    paddingLeft: theme.spacing(1),\r\n    paddingBottom: theme.spacing(1),\r\n  },\r\n  playIcon: {\r\n    height: 38,\r\n    width: 38,\r\n  },\r\n}));\r\n\r\nconst spotifyApi = new SpotifyWebApi({\r\n  clientId: process.env.REACT_APP_CLIENT_ID,\r\n});\r\n\r\nconst MAX_SPEED = parseInt(process.env.REACT_APP_MAXSPEED);\r\n\r\nconst CardComponent = ({\r\n  index,\r\n  accessToken,\r\n  track,\r\n  speed,\r\n  setPlayingTrack,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [result, setResult] = useState([\r\n    {\r\n      artist: [{ name: \"Artist Name\" }],\r\n      title: \"Song name\",\r\n      albumUrl:\r\n        \"https://www.thefennvoice.org/.a/6a017d3e8f0065970c022ad3c481a6200d-pi\",\r\n    },\r\n  ]);\r\n\r\n  const getSongInfo = (track) => {\r\n    let search = track.Key._text;\r\n    if (speed < MAX_SPEED) {\r\n      search = search.substr(0, search.length - 8);\r\n    } else {\r\n      search = search.substr(0, search.length - 4);\r\n    }\r\n\r\n    getSongs(accessToken, search, setResult, true);\r\n  };\r\n\r\n  const handlePlay = (arg) => {\r\n    setPlayingTrack(arg);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!accessToken) return;\r\n    spotifyApi.setAccessToken(accessToken);\r\n    getSongInfo(track);\r\n  }, [accessToken]);\r\n\r\n  return (\r\n    <div style={{ margin: \"1rem auto\", width: \"90%\" }}>\r\n      <Card className={classes.root}>\r\n        <CardMedia\r\n          className={classes.cover}\r\n          image={result[0] ? result[0].albumUrl : \"Image\"}\r\n          title=\"Live from space album cover\"\r\n        />\r\n        <div className={classes.details}>\r\n          <CardContent className={classes.content}>\r\n            <Typography\r\n              component=\"div\"\r\n              variant=\"h6\"\r\n              style={{\r\n                width: \"200px\",\r\n                whiteSpace: \"nowrap\",\r\n              }}\r\n            >\r\n              <Box component=\"div\" textOverflow=\"ellipsis\" overflow=\"hidden\">\r\n                <strong>{result[0] ? result[0].title : \"SONG NAME\"}</strong>\r\n              </Box>\r\n            </Typography>\r\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">\r\n              {result[0] ? result[0].artist[0].name : \"Artist\"}\r\n            </Typography>\r\n          </CardContent>\r\n          <div className={classes.controls}>\r\n            <IconButton aria-label=\"previous\">\r\n              <SkipPreviousIcon />\r\n            </IconButton>\r\n            <a onClick={() => handlePlay(result[0])}>\r\n              <IconButton aria-label=\"play/pause\">\r\n                <PlayArrowIcon className={classes.playIcon} />\r\n              </IconButton>\r\n            </a>\r\n            <IconButton aria-label=\"next\">\r\n              <SkipNextIcon />\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardComponent;\r\n","import { Typography } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport CardComponent from \"./CardComponent\";\r\n\r\nimport \"./home.css\";\r\n\r\nconst Home = ({ accessToken, result, speed, setPlayingTrack, setUrlName }) => {\r\n  return (\r\n    <div style={{ width: \"80%\", margin: \"1rem auto\" }}>\r\n      <Typography variant=\"h3\" component=\"h4\">\r\n        Library\r\n      </Typography>\r\n\r\n      <div className=\"homegrid\">\r\n        {result.map((track, index) => {\r\n          return (\r\n            <CardComponent\r\n              key={index}\r\n              accessToken={accessToken}\r\n              track={track}\r\n              speed={speed}\r\n              setPlayingTrack={setPlayingTrack}\r\n              setUrlName={setUrlName}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./music.css\";\r\n\r\nconst MusicPlayer = ({ track, url }) => {\r\n  const [trackUrl, setTrackUrl] = useState(url);\r\n  useEffect(() => {\r\n    setTrackUrl(url);\r\n  }, [url, track]);\r\n\r\n  return (\r\n    <div id=\"container\">\r\n      <img src={track.albumUrl} width=\"100\" height=\"100\" alt=\"\" id=\"img\" />\r\n      <h1 className=\"title\">{track ? track.title : \"Song Name\"}</h1>\r\n\r\n      <audio\r\n        controls\r\n        style={{ width: \"95%\", marginLeft: \"-4rem\" }}\r\n        autoPlay\r\n        src={trackUrl}\r\n        type=\"audio/mpeg\"\r\n      ></audio>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MusicPlayer;\r\n","import { Button } from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { handleDownload, handleUpload, playSong } from \"../helper/apiCalls\";\r\nimport MusicPlayer from \"./MusicPlayer\";\r\n\r\nconst backend = process.env.REACT_APP_BACKEND;\r\nvar firstTime = true;\r\nconst Player = ({ track, speed }) => {\r\n  const [url, setUrl] = useState(\"\");\r\n  const [names, setNames] = useState([]);\r\n  const startUp = () => {\r\n    axios\r\n      .get(`${backend}/list`, {\r\n        params: {\r\n          internetSpeed: speed,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        let data = JSON.parse(res.data);\r\n        data.ListBucketResult.Contents.forEach((name) => {\r\n          setNames((arr) => [...arr, name.Key._text]);\r\n        });\r\n      });\r\n  };\r\n\r\n  let data;\r\n  const handlePlay = () => {\r\n    data = playSong(speed, names, track);\r\n\r\n    data.then((res) => {\r\n      setUrl(res);\r\n    });\r\n  };\r\n\r\n  const download = () => {\r\n    let btn = document.getElementById(\"btn\");\r\n\r\n    btn.innerHTML = \"Downloading...\";\r\n    let data = handleDownload(track, speed);\r\n    data.then((res) => {\r\n      btn.innerHTML = \"Uploading...\";\r\n      console.log(res);\r\n      let upload = handleUpload(res.name, res.dest, speed);\r\n      upload.then((result) => {\r\n        btn.innerHTML = \"Upload Successful\";\r\n        console.log(result.data);\r\n      });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    startUp();\r\n    handlePlay();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    handlePlay();\r\n  }, [track]);\r\n\r\n  if (url) {\r\n    firstTime = false;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {url ? (\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            position: \"fixed\",\r\n            bottom: 0,\r\n            background:\r\n              \"linear-gradient(90deg, rgba(157,89,203,1) 0%, rgba(255,104,104,1) 50%, rgba(233,180,105,1) 100%)\",\r\n            padding: \"1rem 2rem\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <MusicPlayer track={track} url={url} />\r\n        </div>\r\n      ) : firstTime ? (\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            position: \"fixed\",\r\n            bottom: 0,\r\n            paddingBottom: \"1rem\",\r\n            textAlign: \"center\",\r\n            background:\r\n              \"linear-gradient(90deg, rgba(157,89,203,1) 0%, rgba(255,104,104,1) 50%, rgba(233,180,105,1) 100%)\",\r\n          }}\r\n        >\r\n          <h2>Fetching {track.title}</h2>\r\n\r\n          {handlePlay()}\r\n        </div>\r\n      ) : (\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            position: \"fixed\",\r\n            bottom: 0,\r\n            paddingBottom: \"1rem\",\r\n            textAlign: \"center\",\r\n            background:\r\n              \"linear-gradient(90deg, rgba(157,89,203,1) 0%, rgba(255,104,104,1) 50%, rgba(233,180,105,1) 100%)\",\r\n          }}\r\n        >\r\n          <h2>Song Not found in Library</h2>\r\n          <Button\r\n            color=\"primary\"\r\n            id=\"btn\"\r\n            variant=\"contained\"\r\n            onClick={download}\r\n          >\r\n            Add to Library\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Player;\r\n","import { Backdrop, CircularProgress } from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nconst Loading = () => {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setOpen(!open);\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        <CircularProgress color=\"secondary\" />\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport useAuth from \"./useAuth\";\r\nimport SpotifyWebApi from \"spotify-web-api-node\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport Appbar from \"./Components/Appbar\";\r\nimport Home from \"./Components/Home\";\r\nimport Player from \"./Components/Player\";\r\nimport getSongs from \"./helper/spotifyAPICalls\";\r\nimport Loading from \"./Components/Loading\";\r\n\r\nconst backend = process.env.REACT_APP_BACKEND;\r\nconst spotifyApi = new SpotifyWebApi({\r\n  clientId: process.env.REACT_APP_CLIENT_ID,\r\n});\r\n\r\nconst Dashboard = ({ code, speed }) => {\r\n  const accessToken = useAuth(code);\r\n\r\n  const [search, setSearch] = useState();\r\n  const [list, setList] = useState([]);\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [playingTrack, setPlayingTrack] = useState();\r\n\r\n  // const [lyrics, setLyrics] = useState(\"\");\r\n\r\n  const searchSongs = () => {\r\n    let cancel = false;\r\n\r\n    getSongs(accessToken, search, setSearchResult);\r\n    return () => (cancel = true);\r\n  };\r\n\r\n  const chooseTrack = (track) => {\r\n    setSearch(\"\");\r\n    setPlayingTrack(track);\r\n    setSearchResult([]);\r\n  };\r\n\r\n  // const playingLyrics = () => {\r\n  //   if (!playingTrack) return;\r\n\r\n  //   axios\r\n  //     .get(`${backend}/lyrics`, {\r\n  //       params: {\r\n  //         track: playingTrack.title,\r\n  //         artist: playingTrack.artist[0].name,\r\n  //       },\r\n  //     })\r\n  //     .then((res) => {\r\n  //       setLyrics(res.data.lyrics);\r\n  //     });\r\n  // };\r\n\r\n  const getList = () => {\r\n    console.log(\"Your Internet SPEED is: \", speed);\r\n    axios\r\n      .get(`${backend}/list`, { params: { internetSpeed: speed } })\r\n      .then((res) => JSON.parse(res.data))\r\n      .then((data) => {\r\n        data.ListBucketResult.Contents.forEach((song) => {\r\n          setList((old) => [...old, song]);\r\n        });\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (speed) {\r\n      getList();\r\n    }\r\n  }, [speed]);\r\n\r\n  useEffect(() => {\r\n    if (!accessToken) return;\r\n    spotifyApi.setAccessToken(accessToken);\r\n  }, [accessToken]);\r\n\r\n  useEffect(() => {\r\n    searchSongs();\r\n  }, [accessToken, search]);\r\n\r\n  // useEffect(() => {\r\n  //   playingLyrics();\r\n  // }, [playingTrack]);\r\n\r\n  return (\r\n    <div>\r\n      <Appbar\r\n        search={search}\r\n        setSearch={setSearch}\r\n        result={searchResult}\r\n        setResult={setSearchResult}\r\n        setPlayingTrack={setPlayingTrack}\r\n        chooseTrack={chooseTrack}\r\n      />\r\n      <div style={{ marginTop: \"5rem\" }}></div>\r\n      {list.length == 0 && (\r\n        <div>\r\n          <Loading />\r\n        </div>\r\n      )}\r\n      {list.length !== 0 && (\r\n        <div>\r\n          <Home\r\n            result={list}\r\n            accessToken={accessToken}\r\n            speed={speed}\r\n            setPlayingTrack={setPlayingTrack}\r\n          />\r\n          <div style={{ marginBottom: \"10rem\" }}></div>\r\n\r\n          {playingTrack && <Player track={playingTrack} speed={speed} />}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { Button } from \"@material-ui/core\";\r\n\r\nconst client_id = process.env.REACT_APP_CLIENT_ID;\r\nconst redirect_uri = process.env.REACT_APP_REDIRECT_URI;\r\nconst scope =\r\n  \"streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state\";\r\n\r\nconst AUTH_URL = `https://accounts.spotify.com/authorize?client_id=${client_id}&response_type=code&redirect_uri=${redirect_uri}&scope=${scope}`;\r\n\r\n// console.log(\"AUTH URL: \", AUTH_URL);\r\nconst login = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"100vh\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        backgroundColor: \"#ebebeb\",\r\n      }}\r\n    >\r\n      <a href={AUTH_URL} style={{ textDecoration: \"none\" }}>\r\n        <Button color=\"secondary\" variant=\"contained\" size=\"large\">\r\n          Login to MUSICLOUD\r\n        </Button>\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default login;\r\n","import { useState } from \"react\";\nimport Dashboard from \"./Dashboard\";\nimport Login from \"./Login\";\n\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: \"#339ba5\",\n      main: \"#00838f\",\n      dark: \"#005b64\",\n      contrastText: \"#fff\",\n    },\n    secondary: {\n      light: \"#df6843\",\n      main: \"#d84315\",\n      dark: \"#972e0e\",\n      contrastText: \"#fff\",\n    },\n  },\n});\n\nconst code = new URLSearchParams(window.location.search).get(\"code\");\n\nfunction App() {\n  const [speed, setSpeed] = useState(0);\n\n  const getInternetSpeed = () => {\n    var imageAddr =\n      \"https://upload.wikimedia.org/wikipedia/commons/b/b9/Pizigani_1367_Chart_1MB.jpg\";\n    var downloadSize = 1048576; //bytes\n    var speedMbps;\n    function InitiateSpeedDetection() {\n      console.log(\"Checking your network speed, please wait...\");\n      window.setTimeout(MeasureConnectionSpeed, 1);\n    }\n\n    if (window.addEventListener) {\n      window.addEventListener(\"load\", InitiateSpeedDetection, false);\n    } else if (window.attachEvent) {\n      window.attachEvent(\"onload\", InitiateSpeedDetection);\n    }\n\n    function MeasureConnectionSpeed() {\n      var startTime, endTime;\n      var download = new Image();\n      download.onload = function () {\n        endTime = new Date().getTime();\n        showResults();\n      };\n\n      download.onerror = function (err, msg) {\n        console.error(\"Invalid image, or error downloading\");\n      };\n\n      startTime = new Date().getTime();\n      var cacheBuster = \"?nnn=\" + startTime;\n      download.src = imageAddr + cacheBuster;\n\n      function showResults() {\n        var duration = (endTime - startTime) / 1000;\n        var bitsLoaded = downloadSize * 8;\n        var speedBps = (bitsLoaded / duration).toFixed(2);\n        var speedKBps = (speedBps / 1024).toFixed(2);\n        var speedMBps = (speedKBps / 1024).toFixed(2);\n        speedMbps = (speedMBps * 8).toFixed(2);\n        setSpeed(speedMBps);\n      }\n    }\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      {getInternetSpeed()}\n      {code ? <Dashboard code={code} speed={speed} /> : <Login />}\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport Dashboard from \"./Dashboard\";\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route path=\"/\" component={App} exact />\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Routes from \"./Routes\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Routes />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}